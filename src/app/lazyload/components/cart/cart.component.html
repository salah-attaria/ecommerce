<div class="container my-5">
  <div *ngIf="message" class="alert alert-danger" role="alert">
    Your Cart is empty.Please add something in your cart.
  </div>
  <div class="row">
    <div class="d-flex m-5">
      <div class="row col-md-7">
        <h2 class="color-fav">My CART</h2>

        <hr class="mb-4" />
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <div>
            <ng-container matColumnDef="_id">
              <th mat-header-cell *matHeaderCellDef class="color-fav">No.</th>
              <td
                mat-cell
                *matCellDef="let element; let i = index"
                class="color-fav"
              >
                {{ i + 1 }}
              </td>
            </ng-container>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef class="color-fav">Name</th>
              <td mat-cell *matCellDef="let element" class="color-fav">
                {{ element.name }}
              </td>
            </ng-container>

            <ng-container matColumnDef="price">
              <th mat-header-cell *matHeaderCellDef class="color-fav">Price</th>
              <td mat-cell *matCellDef="let element" class="color-fav">
                {{ element.price }}
              </td>
            </ng-container>

            <ng-container matColumnDef="quantity">
              <th mat-header-cell *matHeaderCellDef class="color-fav">
                Quantity
              </th>
              <td mat-cell *matCellDef="let element" class="color-fav">
                {{ element.quantity }}
              </td>
            </ng-container>
            <ng-container matColumnDef="total_amount">
              <th mat-header-cell *matHeaderCellDef class="color-fav">Total</th>
              <td mat-cell *matCellDef="let element" class="color-fav">
                {{ element.total_amount }}
              </td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef class="color-fav">
                Remove
              </th>
              <td mat-cell *matCellDef="let element" class="color-fav">
                <mat-icon (click)="deleteItem(element._id)" class="color-fav"
                  >delete</mat-icon
                >
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </div>
        </table>
        <br />

        <a
          routerLink="/lazy/home"
          class="btn mt-3 bgcolor-fav"
          style="
            text-decoration: none;
            align-items: center;
            width: 50%;
            color: white !important;
            background-color: #456879;
          "
          >Continue Shopping</a
        >
      </div>
      <hr class="my-5" />

      <div class="row col-md-5 ms-5">
        <div class="">
          <div class="col-md-5 col-lg-4 order-md-last">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
              <span class="color-fav">Your cart</span>
              <span class="badge bgcolor-fav rounded-pill">{{
                dataSource.data.length
              }}</span>
            </h4>
            <ul class="list-group mb-3">
              <li
                *ngFor="let data of dataSource.data; let i = index"
                class="list-group-item d-flex justify-content-between lh-sm"
              >
                <div>
                  <h6 class="my-0 color-fav">{{ data.name }}</h6>
                </div>
                <span class="color-fav">${{ data.total_amount }}</span>
              </li>

              <li class="list-group-item d-flex justify-content-between">
                <span class="color-fav">Total (USD)</span>
                <strong class="color-fav">${{ getTotalPrice() }}</strong>
              </li>
            </ul>
            <a
              *ngIf="!message"
              routerLink="/lazy/checkout"
              class="btn"
              style="
                text-decoration: none;
                width: 100%;
                color: white !important;
                background-color: #456879;
              "
              >CheckOut</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
